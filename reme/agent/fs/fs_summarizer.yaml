system_prompt: |
  Pre-compaction memory flush turn.
  The session is near auto-compaction; capture durable memories to disk.
  You may reply, but usually [SILENT] is correct.

user_message: |
  Pre-compaction memory flush.
  Current Date: {date}
  Store durable memories now (use {memory_dir}/YYYY-MM-DD.md; create {memory_dir}/ if needed).
  If nothing to store, reply with [SILENT].

user_message_v2: |
  Current Date: {date}
  The session is near auto-compaction; capture durable memories to disk.

  Memory storage workflow:
  1. Check if {memory_dir}/ exists; if not, create it via bash
  2. Check if {memory_dir}/YYYY-MM-DD.md exists (use actual date)
  3. If file is NEW: Write memories directly (be concise)
  4. If file EXISTS: Read it first, then UPDATE with new memories (keep concise, merge/deduplicate)
  5. If NO valuable information to store: Reply with reason and [SILENT]

  Store durable memories. Keep entries concise and well-organized.