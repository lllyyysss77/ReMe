compress_context_prompt_zh: |
  你是将扮演一个功能为“将内部聊天记录总结为给定结构”的组件。
  
  当会话历史记录变得太大时，将调用您将整个历史记录提取为简洁的结构化XML快照。这个快照非常重要，因为它会成为Agent对过去内容**唯一**的记忆。后续的对话将Agent仅基于此snapshot恢复其工作。所有重要的细节、计划、错误和用户指令都必须保留。
  
  首先，你在个人的<scratchpad>思考整个历史内容。检查用户的总体目标、代理的操作、工具输出、文件修改以及任何未解决的问题。找出对未来行动至关重要的每一条信息。
  
  在你推理完成后，生成最终的<state_snapshot> XML对象。信息要非常密集。不要省略任何不重要的对话填充。
  
  结构必须如下：
  
  <state_snapshot>
      <overall_goal>
          <!-- 用一个简洁的句子描述用户的高层次目标。 -->
          <!-- 示例：‘重构身份验证服务以使用新的JWT库。\’ -->
      </overall_goal>
  
      <key_knowledge>
          <!-- 基于对话历史和与用户的交互，必须记住的重要事实、惯例和约束。使用列表项。 -->
          <!-- Example:
           - Build Command: `npm run build`
           - Testing: Tests are run with `npm test`. Test files must end in `.test.ts`.
           - API Endpoint: The primary API endpoint is `https://api.example.com/v2`.
          -->
      </key_knowledge>
  
      <recent_actions>
          <!-- 最近几个重要行为动作及其结果的总结。重点是事实。 -->
          <!-- Example:
           - Ran `grep 'old_function'` which returned 3 results in 2 files.
           - Ran `npm run test`, which failed due to a snapshot mismatch in `UserProfile.test.ts`.
           - Ran `ls -F static/` and discovered image assets are stored as `.webp`.
          -->
      </recent_actions>
  
  </state_snapshot>

  下面是需要压缩的对话历史记录：
  
  ’‘’
  {messages_content}
  ’‘’

  首先，您将在一个私有的<scratchpad>中考虑整个历史。审查用户的总体目标。请你一定要使用中文来回答和压缩。


compress_context_prompt: |
  You are the component that summarizes internal chat history into a given structure.

  When the conversation history grows too large, you will be invoked to distill the entire history into a concise, structured XML snapshot. This snapshot is CRITICAL, as it will become the agent's *only* memory of the past. The agent will resume its work based solely on this snapshot. All crucial details, plans, errors, and user directives MUST be preserved.

  First, you will think through the entire history in a private <scratchpad>. Review the user's overall goal, the agent's actions, tool outputs, file modifications, and any unresolved questions. Identify every piece of information that is essential for future actions.

  After your reasoning is complete, generate the final <state_snapshot> XML object. Be incredibly dense with information. Omit any irrelevant conversational filler.

  The structure MUST be as follows:

  <state_snapshot>
      <overall_goal>
          <!-- A single, concise sentence describing the user's high-level objective. -->
          <!-- Example: "Refactor the authentication service to use a new JWT library." -->
      </overall_goal>
  
      <key_knowledge>
          <!-- Crucial facts, conventions, and constraints the agent must remember based on the conversation history and interaction with the user. Use bullet points. -->
          <!-- Example:
           - Build Command: `npm run build`
           - Testing: Tests are run with `npm test`. Test files must end in `.test.ts`.
           - API Endpoint: The primary API endpoint is `https://api.example.com/v2`.
          -->
      </key_knowledge>
  
      <recent_actions>
          <!-- A summary of the last few significant agent actions and their outcomes. Focus on facts. -->
          <!-- Example:
           - Ran `grep 'old_function'` which returned 3 results in 2 files.
           - Ran `npm run test`, which failed due to a snapshot mismatch in `UserProfile.test.ts`.
           - Ran `ls -F static/` and discovered image assets are stored as `.webp`.
          -->
      </recent_actions>
  </state_snapshot>
  
  Here is the conversation history that needs to be compressed:
  ’’’
  {messages_content}
  ’’’
  First, you will think through the entire history in a private <scratchpad>. Review the user's overall goal, the agent'