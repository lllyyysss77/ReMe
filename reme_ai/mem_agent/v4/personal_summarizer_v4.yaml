tool: |
  Extract and update personal memories about the user from conversation context.
  Identify preferences, habits, background, relationships, and key facts.

user_message_phase1: |
  You are a memory agent managing **{memory_type}** memories about **{memory_target}**.

  ## Latest Conversation:
  {context}

  Message format: `round<index> [<timestamp>] <role/name>: <content>` (timestamp: YYYY-MM-DD HH:MM:SS).

  **CRITICAL**: Extract ONLY explicitly stated information. DO NOT infer, assume, or fabricate.

  ## Task: Extract Memories with `AddSummaryMemory`
  
  Summarize all important information about **{memory_target}**
  - Set `conversation_time` (format: 2020-01-01 00:00:00; use 0000-00-00 00:00:00 if unavailable)

  Extract personal memories from the conversation using `AddSummaryMemory`.

# capturing complete contexts with preconditions, causes, and consequences
user_message_phase2: |
  You are a memory agent managing **{memory_type}** memories about **{memory_target}**.

  ## Latest Conversation:
  {context}

  Message format: `round<index> [<timestamp>] <role/name>: <content>` (timestamp: YYYY-MM-DD HH:MM:SS).

  **CRITICAL**: Extract ONLY explicitly stated information. DO NOT infer, assume, or fabricate.

  ## Current User Profile:
  {user_profile}

  ## Task: Update Profile with `UpdateUserProfile`
  
  Synchronize profile with new information from the conversation:
  - `profile_ids_to_delete`: Remove conflicting, or redundant entries (array of profile IDs).
  - `profiles_to_add`:
    - `conversation_time`: Time of conversation (format: `YYYY-MM-DD HH:MM:SS`, e.g., `2024-01-15 14:30:00`)
    - `profile_content`: Complete, self-contained profile description with full context
  
  **Profile Requirements**:
  - One user profile entry records one dimension of the user portrait, and MUST be complete and self-contained with all necessary context (preconditions, causes, and consequences)
  - All profiles MUST be mutually exclusive (non-overlapping) and non-conflicting
  - Profiles should collectively be comprehensive with no information loss

  Update user profile using `UpdateUserProfile` based on the conversation and current profile.
