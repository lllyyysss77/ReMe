# Operations Documentation

This document provides an overview of all operations in the ExperienceMaker framework.

## Operations Overview

| Op Name                  | Class                       | Description                                                                                                                                                                                                                   | Parameters                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------|-----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Build Query              | `BuildQueryOp`              | Builds retrieval query from user request. Extracts query from request.query or constructs it from messages using LLM if enabled.                                                                                              | `op.build_query_op.params.enable_llm_build = true/false` - Enable LLM-based query construction from messages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Recall Experience        | `RecallExperienceOp`        | Recalls relevant experiences from vector store based on the built query. Performs semantic search and retrieves top-k candidates.                                                                                             | `op.recall_experience_op.params.retrieve_top_k = 15` - Number of experiences to retrieve<br>`op.recall_experience_op.params.query_enhancement = false` - Enable query enhancement with message context                                                                                                                                                                                                                                                                                                                                                                                                          |
| Rerank Experience        | `RerankExperienceOp`        | Reranks and filters recalled experiences using LLM evaluation and score-based filtering to improve relevance.                                                                                                                 | `op.rerank_experience_op.params.enable_llm_rerank = true` - Enable LLM-based reranking<br>`op.rerank_experience_op.params.enable_score_filter = false` - Enable score-based filtering<br>`op.rerank_experience_op.params.min_score_threshold = 0.3` - Minimum score threshold for filtering<br>`op.rerank_experience_op.params.top_k = 5` - Number of top experiences to return                                                                                                                                                                                                                                 |
| Rewrite Experience       | `RewriteExperienceOp`       | Generates and rewrites context messages from reranked experiences to make them more relevant and actionable for the current task.                                                                                             | `op.rewrite_experience_op.params.enable_llm_rewrite = true` - Enable LLM-based context rewriting                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| Merge Experience         | `MergeExperienceOp`         | Merges the list of experiences into a single formatted message that can be used as context in downstream operations.                                                                                                          | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Trajectory Preprocess    | `TrajectoryPreprocessOp`    | Preprocesses trajectories by validating their structure and classifying them into success/failure categories based on score thresholds. Sets up context for downstream operations.                                            | `op.trajectory_preprocess_op.params.success_threshold = 1.0` - Score threshold to classify trajectories as successful                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Trajectory Segmentation  | `TrajectorySegmentationOp`  | Segments trajectories into meaningful step sequences using LLM-based analysis. Identifies natural breakpoints based on logical completion, context switches, tool boundaries, and reasoning phases.                           | `op.trajectory_segmentation_op.params.segment_target = "all"` - Which trajectories to segment ("all", "success", "failure")                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Experience Validation    | `ExperienceValidationOp`    | Validates the quality and usefulness of extracted experiences using LLM-based assessment. Evaluates actionability, accuracy, relevance, clarity, and uniqueness of experiences.                                               | `op.experience_validation_op.params.validation_threshold = 0.3` - Minimum score threshold for experience validation                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Experience Storage       | `ExperienceStorageOp`       | Stores validated and deduplicated experiences to the vector database. Converts experiences to vector nodes and handles workspace-specific storage operations.                                                                 | `op.experience_storage_op.params.default_workspace_id = "default"` - Default workspace ID when not specified in request                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Experience Deduplication | `ExperienceDeduplicationOp` | Removes duplicate experiences by comparing embeddings of experience content. Performs similarity analysis against both existing stored experiences and current batch experiences.                                             | `op.experience_deduplication_op.params.similarity_threshold = 0.5` - Cosine similarity threshold for duplicate detection<br>`op.experience_deduplication_op.params.max_existing_experiences = 1000` - Maximum number of existing experiences to compare against                                                                                                                                                                                                                                                                                                                                                 |
| Comparative Extraction   | `ComparativeExtractionOp`   | Extracts comparative experiences by analyzing differences between high/low scoring trajectories (soft comparison) and success/failure patterns (hard comparison). Uses similarity analysis to find comparable step sequences. | `op.comparative_extraction_op.params.enable_soft_comparison = true` - Enable highest vs lowest score comparison<br>`op.comparative_extraction_op.params.enable_similarity_comparison = false` - Enable success vs failure similarity comparison<br>`op.comparative_extraction_op.params.max_similarity_sequences = 5` - Maximum sequences to compare for similarity<br>`op.comparative_extraction_op.params.similarity_threshold = 0.3` - Similarity threshold for step sequence matching<br>`op.comparative_extraction_op.params.max_similarity_pairs = 3` - Maximum similar pairs to extract experiences from |
| Simple Summary           | `SimpleSummaryOp`           | Generates simple text summaries from individual trajectories by analyzing execution process and results. Creates basic experiences from trajectory completion status.                                                         | `op.simple_summary_op.params.success_score_threshold = 0.9` - Score threshold to classify trajectory as successful                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Success Extraction       | `SuccessExtractionOp`       | Extracts actionable experiences specifically from successful trajectories. Processes both segmented step sequences and entire trajectories to identify successful patterns and strategies.                                    | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Failure Extraction       | `FailureExtractionOp`       | Extracts learning experiences from failed trajectories to identify common pitfalls and failure patterns. Processes both segmented sequences and complete trajectories for failure analysis.                                   | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Update Vector Store      | `UpdateVectorStoreOp`       | Updates vector store by inserting new vector nodes or deleting existing ones. Handles batch operations for experience storage and management in workspace-specific vector databases.                                          | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Recall Vector Store      | `RecallVectorStoreOp`       | Retrieves relevant experiences from vector store using semantic search. Filters results by score threshold and removes duplicates based on content similarity.                                                                | `op.recall_vector_store_op.params.threshold_score = <float>` - Minimum similarity score threshold for filtering results (optional)                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Vector Store Action      | `VectorStoreActionOp`       | Performs administrative actions on vector store workspaces including copy, delete, dump, and load operations. Manages workspace lifecycle and data migration between environments.                                            | Action-specific parameters passed through request context (workspace IDs, file paths, etc.)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| React V1                 | `ReactV1Op`                 | Implements ReAct (Reasoning and Acting) agent framework for interactive task execution. Manages tool usage, reasoning steps, and multi-step problem solving with configurable tools and step limits.                          | `op.react_v1_op.params.max_steps = 10` - Maximum number of reasoning/action steps<br>`op.react_v1_op.params.tool_names = "code_tool,dashscope_search_tool,terminate_tool"` - Comma-separated list of available tools                                                                                                                                                                                                                                                                                                                                                                                            |

